#summary Instructions for installing Loki.
#labels Featured,Phase-Deploy,Audience-Installers

Installing Loki is a very simple process. Follow these instructions to integrate Loki with your web site or application. If you have questions or run into any difficulty, you can post a message to [http://groups.google.com/group/loki-installers the Loki installers discussion group], where you will be answered by a developer.

===1. Installing files===
First, the Loki files must be uploaded to and extracted on your web server. Due to browser security features, the entire Loki folder _must_ be placed in an area that will be served from the same host and port as the page(s) on which you want Loki to appear.
  # Obtain a packaged version of Loki from [http://code.google.com/p/loki-editor/downloads/list the downloads section]. Do not download a source package.
  # Loki is distributed in BZip2-compressed tarballs. If you have direct (e.g. shell, terminal services) access to your web server, you can simply extract the archive directly in place using standard UNIX utilities. If you only have FTP access to your server, you must first extract the `loki-###.tar.bz2` file on your own computer, and then upload the resulting folder. Windows users will first need to download a utility like [http://www.7-zip.org/ 7zip] or [http://www.win-rar.com WinRAR] to open the file.

===2. Configuring the server===
To enable clipboard features on Mozilla browsers (e.g., Firefox), Loki contains some signed code within a JAR archive, located at `auxil/privileged.jar` within the Loki folder. For [http://www.mozilla.org/security/announce/2007/mfsa2007-37.html security reasons], Mozilla browsers will not accept this file unless it is served with an appropriate MIME type (such as `application/java-archive`) in the `Content-Type` header. As this restriction exists to prevent users from hosting malicious signed JAR files on unsuspecting sites, no servers come pre-configured to serve them with this content type.

If you are using [http://httpd.apache.org Apache], you probably won't need to configure anything, as Loki comes with an appropriate configuration directive already applied to the  `auxil` folder. For other servers, consult the documentation to find out how to set MIME type associations.

===3. Integrating Loki with your site===
First, include Loki in a `script` tag within your document's `head`. For example, if you were the administrator of _example.com_ and installed Loki at `http://www.example.com/static/scripts/loki/`, you could write:
{{{
<html lang="en">
  <head>
    <title>My Website â€“ Edit a page</title>
    <script src="/static/scripts/loki/loki.js" type="text/javascript" charset="utf-8"></script>

    [Loki initialization code]

    ...
  </head>
  <body>
    ...
  </body>
</html>
}}}
Loki inserts itself into your document by substituting itself for existing `textarea` elements. The section labeled `[Loki initialization code]` should be replaced with appropriate code that  tells Loki which `textarea`s should be replaced. Some examples are provided below; for detailed information, see [Initialization the initialization article].

====Replacing all textareas on the page====
The following code will replace all textareas on a page with Loki editors, using default settings.
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_all_textareas();
</script>
}}}

To create editors with a different set of features than the default, you can tweak the Loki [Options options]. For example, to replace all textareas with editors that include all "power-user" features except for anchors, you can write:
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_all_textareas({options: "power - anchors"});
</script>
}}}

There are several other [Settings settings] that can be edited. To create editors with power-user options that sanitize unsecured images when Loki is served over HTTPS, you can write:
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_all_textareas({options: "power", sanitize_unsecured: true});
</script>
}}}

====Replacing textareas with certain classes====
If you need more flexibility, you can only have Loki replace the textareas that have certain classes. For example, to replace all of the textareas that have the class `rich` with full-featured editors, you can write:
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_textareas_by_class("rich", {options: "power"});
</script>
}}}

You can match multiple classes by separating them with spaces, just as you can do in the HTML `class` attribute itself. To replace all of the textareas that are classed both as `rich` and `loki`, you can write:
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_textareas_by_class("rich loki", {options: "power"});
</script>
}}}

====Replacing specific textareas====
You can replace specific textareas based on their ID's. For example, to replace the textareas with ID's "editor" and "comment", you can write:
{{{
<script type="text/javascript" charset="utf-8">
   Loki.convert_textareas(["editor", "comment"], {options: "default + tables"});
</script>
}}}